function getScrollbarWidth(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var a=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),a}function setScrollOffset(){$("body").hasClass("no-scroll")?$(document).height()>$(window).height()&&$(".scroll-offset").css("padding-right",getScrollbarWidth()+"px"):$(".scroll-offset").css("padding-right","")}function removeHash(){var e,t,a=window.location;"pushState"in history?history.pushState("",document.title,a.pathname+a.search):(e=document.body.scrollTop,t=document.body.scrollLeft,a.hash="",document.body.scrollTop=e,document.body.scrollLeft=t)}function modalShow(e,t){$("body").addClass("no-scroll"),e.find(".modal__form").show(),e.find(".modal__result").hide(),setScrollOffset(),$(".modal").removeClass("is-open").hide(),setTimeout((function(){e.show(),e.addClass("is-open")}),100),$("#layer_overlay").fadeIn("fast");var a=function(){e.removeClass("is-open"),$("#layer_overlay").fadeOut("fast"),setTimeout((function(){e.hide(),$("body").removeClass("no-scroll"),setScrollOffset(),removeHash()}),1)};$(document).keyup((function(e){"Escape"===e.key&&a()})),e.find(".modal__close,[data-action=close]").on("click",(function(e){e.preventDefault(),a()}))}$((function(e){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e("body").addClass("apple"),"objectFit"in document.documentElement.style==!1&&e("img[data-object-fit]").each((function(){var t=e(this);t.css("background","transparent url("+t.attr("src")+") no-repeat 50%/"+t.attr("data-object-fit")),t.attr("src","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+t.width()+"' height='"+t.height()+"'%3E%3C/svg%3E")})),e("#inter-map svg [data-target]").on("click",(function(){e("#inter-map .inter-map__legend .map-point").hide().filter(e(this).attr("data-target")).show()})),e(".js-modal").on("click",(function(t){t.preventDefault(),e(this).data("val")&&e(e(this).attr("href")).find("input[name=val]").val(e(this).data("val")),modalShow(e(e(this).attr("href")),e(this))})),e(".month-select__btn").on("click",(function(t){t.preventDefault(),e(this).hasClass("is-open")?(e(".month-select__picker").hide(),e(this).removeClass("is-open")):(e(".month-select__picker").show(),e(this).addClass("is-open"))})),e(".month-select__picker").each((function(){var t=e(this);t.datepicker({format:"mm-yyyy",startView:"months",minViewMode:"months",language:"en"==t.data("lang")?"en":"ru",autoclose:!0}).on("changeDate",(function(t){var a,s,o=t.format();a=o.split("-")[1],s=parseInt(o.split("-")[0]),e(".month-select__picker").hide(),e(".month-select__btn").removeClass("is-open"),e(".month-select__btn span").text(["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"][s-1]+((new Date).getFullYear()!=a?" "+a:"")),e.post("/bjax.php",{cmd:"getJsonEvents",y:a,m:s},(function(t){"success"===t.result&&(e(".events-nav__day-slider .owl-carousel").trigger("destroy.owl.carousel"),e(".events-list__grid").html(t.events).find(".events-list__item").hide(),e(".events-nav__day-slider .owl-carousel").html(t.days).owlCarousel({items:10,loop:0,nav:1,margin:0,dots:0,navText:['<svg height="12" width="6"><use xlink:href="template/images/sprite.svg#caret_l"></use></svg>','<svg height="12" width="6"><use xlink:href="template/images/sprite.svg#caret_r"></use></svg>'],responsive:{0:{items:3},480:{items:5},768:{items:6},992:{items:8},1200:{items:10}},onInitialized:function(){e(".events-nav__day-slider .day-slide").off("click"),e(".events-list__grid .events-list__item").each((function(){e(".events-nav__day-slider .day-slide[data-date='"+e(this).attr("data-date")+"']").addClass("is-enable").addClass(e(this).attr("data-type"))})),e(".events-nav__day-slider .day-slide.is-enable").on("click",(function(){e(".events-nav__day-slider .day-slide").removeClass("is-active"),e(this).addClass("is-active"),e(".events-list__grid .events-list__item").hide().filter("[data-date='"+e(this).attr("data-date")+"']").show()})),e(".events-nav__day-slider .day-slide[data-date='"+parseInt((new Date).getDate())+"."+parseInt((new Date).getMonth()+1)+"."+parseInt((new Date).getFullYear())+"']"),e(".events-list__grid .events-list__item").show()}}))}),"json")}))})),e(".js-m-menu-btn").on("click",(function(t){t.preventDefault(),e(".m-header").hasClass("is-open")?(e(".m-header").removeClass("is-open"),e("body").removeClass("no-scroll"),setScrollOffset()):e("html, body").stop().animate({scrollTop:0},100,"swing",(function(){e(".m-header").addClass("is-open"),e("body").addClass("no-scroll"),setScrollOffset()}))})),e(".hero__slider .owl-carousel").owlCarousel({items:1,loop:1,nav:1,dotsContainer:".hero__slider-nav-dots",navContainer:".hero__slider-nav-arrows",navText:['<svg height="12" width="6"><use xlink:href="/template/images/sprite.svg#caret_l"></use></svg>','<svg height="12" width="6"><use xlink:href="/template/images/sprite.svg#caret_r"></use></svg>']}),e(".front-events__slider .owl-carousel").owlCarousel({items:4,loop:0,nav:1,dots:0,margin:20,navContainer:".front-events__slider-arrows",navText:['<svg height="12" width="6"><use xlink:href="/template/images/sprite.svg#caret_l"></use></svg>','<svg height="12" width="6"><use xlink:href="/template/images/sprite.svg#caret_r"></use></svg>'],responsive:{0:{items:2,autoWidth:!0},480:{items:2},768:{items:3},992:{items:4}}}),e(".front-news__slider .owl-carousel").owlCarousel({items:3,nav:0,dots:0,margin:20,responsive:{0:{items:2,autoWidth:!0},480:{items:2},768:{items:3},992:{items:3}}}),e(".front-gallery__slider .owl-carousel").owlCarousel({items:3,nav:0,dots:1,margin:20.001,scrollbarType:"scroll",responsive:{0:{items:2,autoWidth:!0},480:{items:2},768:{items:3}}}),e("[data-fancybox=gallery]").fancybox({backFocus:!1}),e(".about-team__grid").langth){var t=e(".about-team__grid").isotope({itemSelector:".about-team__item"});e(".about-team__nav-tab").on("click",(function(a){a.preventDefault(),e(".about-team__nav-tab").removeClass("is-active");var s=e(this).addClass("is-active").attr("data-filter");return t.isotope({filter:s}),!1}))}e(".giant-image-slider .owl-carousel").owlCarousel({items:1,loop:1,dots:1,nav:0,margin:20}),e(".reviews__slider .owl-carousel").owlCarousel({items:1,loop:1,dots:0,nav:1,margin:20,navText:['<svg height="12" width="6"><use xlink:href="/template/images/sprite.svg#caret_l"></use></svg>','<svg height="12" width="6"><use xlink:href="/template/images/sprite.svg#caret_r"></use></svg>']}),e(".js-accordion").each((function(){var t=e(this);t.find(".js-accordion__header").on("click",(function(){$section=e(this).parent(".js-accordion__section"),$section.hasClass("is-open")?t.find(".js-accordion__section.is-open").removeClass("is-open"):(t.find(".js-accordion__section.is-open").removeClass("is-open"),$section.addClass("is-open"))}))})),e(".js-dropdown").each((function(){var t=e(this);t.find(".js-dropdown__trigger").on("click",(function(){t.hasClass("is-open")?t.removeClass("is-open"):t.addClass("is-open")}))})),e(".js-tabs").each((function(){var t=e(this),a=t.find(".js-tabs__nav"),s=t.find(".js-tabs__content").hide();a.find(".js-tabs__tab").on("click",(function(t){return t.preventDefault(),s.hide().filter(this.hash).show(),a.find(".js-tabs__tab").removeClass("is-active"),e(this).addClass("is-active"),!1})).filter(":first").click()})),e(".js-filter").each((function(){var t=e(this),a=t.find(".js-filter__grid").isotope({itemSelector:".js-filter__item"});t.find(".js-filter__tab").on("click",(function(s){s.preventDefault(),t.find(".js-filter__tab").removeClass("is-active");var o=e(this).addClass("is-active").attr("data-filter");return a.isotope({filter:o}),!1})),setTimeout((function(){t.find(".js-filter__tab.is-active").click()}),1)})),e(".form-attach input[type='file']").change((function(t){var a=[];if(window.File&&window.FileReader&&window.FileList)for(var s=0;s<t.target.files.length;s++)a.push(t.target.files[s].name);else a.push.append(e(this).val());e(this).parent(".form-attach").find("em").empty().append(a.join(", "))})),e(".ajax-form_feedback").submit((function(t){t.preventDefault();var a=e(".ajax-form_feedback")[0],s=new FormData(a);s.append("action","feedback"),e(".ajax-form_feedback").prop("disabled",!0),e.ajax({type:"POST",enctype:"multipart/form-data",url:"/postmaster.php",data:s,processData:!1,contentType:!1,dataType:"json",cache:!1,timeout:6e5,success:function(t){"success"==t.result?(a.reset(),e(".feedback__result_success").show(),e(".ajax-form_feedback").hide().prop("disabled",!1)):alert(t.msg)},error:function(t){e(".ajax-form_feedback").prop("disabled",!1),location.reload()}})})),e(".ajax-form_feedback-par").submit((function(t){t.preventDefault();var a=e(".ajax-form_feedback-par")[0],s=new FormData(a);s.append("action","feedback-par"),e(".ajax-form_feedback-par").prop("disabled",!0),e.ajax({type:"POST",enctype:"multipart/form-data",url:"/postmaster.php",data:s,processData:!1,contentType:!1,dataType:"json",cache:!1,timeout:6e5,success:function(t){"success"==t.result?(a.reset(),e(".feedback__result_success").show(),e(".ajax-form_feedback-par").hide().prop("disabled",!1)):alert(t.msg)},error:function(t){e(".ajax-form_feedback-par").prop("disabled",!1),location.reload()}})})),e(".ajax-form_order").submit((function(t){t.preventDefault();var a=e(".ajax-form_order")[0],s=new FormData(a);s.append("action","order"),e(".ajax-form_order").prop("disabled",!0),e.ajax({type:"POST",enctype:"multipart/form-data",url:"/postmaster.php",data:s,processData:!1,contentType:!1,dataType:"json",cache:!1,timeout:6e5,success:function(t){"success"==t.result?(a.reset(),e(".feedback__result_success").show(),e(".ajax-form_order").hide().prop("disabled",!1),setTimeout((function(){location.href=t.url}),3e3)):alert(t.msg)},error:function(t){e(".ajax-form_order").prop("disabled",!1),location.reload()}})})),e("#vacancy-form_modal form").submit((function(t){t.preventDefault();var a=e("#vacancy-form_modal form")[0],s=new FormData(a);s.append("action","vacancy"),e("#vacancy-form_modal form").prop("disabled",!0),e.ajax({type:"POST",enctype:"multipart/form-data",url:"/postmaster.php",data:s,processData:!1,contentType:!1,dataType:"json",cache:!1,timeout:6e5,success:function(t){"success"==t.result?(a.reset(),e("#vacancy-form_modal .modal__result").show(),e("#vacancy-form_modal .modal__form").hide().prop("disabled",!1)):alert(t.msg)},error:function(t){e("#vacancy-form_modal form").prop("disabled",!1),location.reload()}})})),e("input[name=phone]").mask("+7 (999) 999-99-99"),svg4everybody()}));